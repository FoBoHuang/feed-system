apiVersion: v1
kind: ConfigMap
metadata:
  name: feed-config
  namespace: feed-system
  labels:
    app.kubernetes.io/name: feed-system
    app.kubernetes.io/component: configmap
data:
  config.yaml: |
    server:
      port: ":8080"
      mode: "release"
      read_timeout: 30s
      write_timeout: 30s

    database:
      host: "postgres-service"
      port: 5432
      user: "feeduser"
      password: "feedpass"
      dbname: "feedsystem"
      sslmode: "disable"
      max_open_conns: 100
      max_idle_conns: 10

    redis:
      host: "redis-service"
      port: 6379
      password: ""
      db: 0
      pool_size: 100
      min_idle_conns: 10

    kafka:
      brokers:
        - "kafka-service:9092"
      topics:
        user_events: "user-events"
        feed_events: "feed-events"
        feed_updates: "feed-updates"

    jwt:
      secret: "your-super-secret-jwt-key-change-in-production"
      expire_time: 24h

    feed:
      push_threshold: 5000
      cache_ttl: 1h
      max_feed_size: 1000
      rank_update_interval: 5m